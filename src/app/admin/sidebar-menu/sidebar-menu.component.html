<div
  class="sidebar-overlay"
  *ngIf="sidebarVisible && isMobile"
  (click)="closeSidebar()"
></div>

<!-- ðŸ§­ Sidebar -->
<div
  class="sidebar d-flex flex-column"
  [ngClass]="{
    collapsed: !isSidebarVisible,
    'mobile-visible': sidebarVisible && isMobile
  }"
>
  <!-- Sidebar Header -->
  <div class="sidebar-header text-center py-3 position-relative">
    <!-- Logo (full or icon based on collapse) -->
    <img
      src="../../../assets/images/myloancrm.png"
      alt="MyLoanCRM"
      class="logo"
      *ngIf="isSidebarVisible"
    />
    <img
      src="../../../assets/fav_icon.svg"
      alt="MyLoanCRM"
      width="40"
      *ngIf="!isSidebarVisible"
    />

    <!-- Sidebar Toggle Button -->
    <div
      class="position-absolute top-0 end-0 pointer-cursor"
      (click)="toggleSidebar()"
    >
      <!-- Show arrow (right) when sidebar is collapsed -->
      <img
        *ngIf="!isSidebarVisible"
        src="../../../assets/images/icons/rightarrow.svg"
        alt="Expand"
        style="width: 20px; height: 20px"
      />

      <!-- Show cross when sidebar is visible -->
      <img
        *ngIf="isSidebarVisible"
        src="../../../assets/images/icons/leftarrow.svg"
        alt="Collapse"
        style="width: 20px; height: 20px"
      />
    </div>
  </div>

  <!-- Sidebar Menu -->
  <div class="flex-grow-1 sidebardiv overflow-auto" *ngIf="menuItems">
    <ul class="nav flex-column sidebar-menu">
      <li class="nav-item" *ngFor="let item of menuItems">
        <a
          class="nav-link d-flex align-items-center"
          [ngClass]="{
            'mx-4': isSidebarVisible,
            'justify-content-center mx-2': !isSidebarVisible
          }"
          [routerLink]="item.route"
          routerLinkActive="active"
          [queryParams]="{ v: version }"
          [routerLinkActiveOptions]="{ exact: false }"
          [pTooltip]="!isSidebarVisible ? item.label : null"
          tooltipPosition="right"
          (click)="showMenuSection()"
          *ngIf="item.condition"
        >
          <img
            [src]="item.icon"
            class="sidebaricon"
            width="24"
            height="24"
            alt="icon"
          />
          <span class="sidebar-label ms-2" *ngIf="isSidebarVisible">
            {{ item.label }}
          </span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Footer -->
  <div class="sidebar-footer px-4 mb-3 pointer-cursor" *ngIf="isSidebarVisible">
    <a
      class="nav-link d-flex align-items-center"
      (click)="confirmLogout($event)"
    >
      <img
        alt="Logout"
        src="../../../assets/images/icons/logout.svg"
        class="me-3 sidebaricon"
      />
      <span class="sidebar-label">Logout</span>
    </a>
  </div>
</div>
